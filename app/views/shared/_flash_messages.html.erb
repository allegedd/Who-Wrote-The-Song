<% flash.each do |type, message| %>
  <% 
    case type.to_s
    when 'notice'
      css_class = "bg-gray-900 text-gray-200"
      icon = "✓"
    when 'alert'
      css_class = "bg-gray-900 text-gray-200"
      icon = "⚠"
    when 'success'
      css_class = "bg-gray-900 text-gray-200"
      icon = "✓"
    when 'error'
      css_class = "bg-gray-900 text-gray-200"
      icon = "✗"
    when 'warning'
      css_class = "bg-gray-900 text-gray-200"
      icon = "⚠"
    else
      css_class = "bg-gray-900 text-gray-200"
      icon = "ℹ"
    end
  %>
  <div class="fixed left-1/2 transform -translate-x-1/2 z-50 max-w-xs mx-4" 
       data-flash-message
       style="top: 2rem;">
    <div class="<%= css_class %> px-4 py-2 rounded-full shadow-lg backdrop-blur-sm bg-opacity-80">
      <div class="flex items-center">
        <div class="flex-shrink-0">
          <span class="text-lg font-bold"><%= icon %></span>
        </div>
        <div class="ml-2 flex-1">
          <p class="text-sm font-medium"><%= message %></p>
        </div>
        <div class="ml-2 flex-shrink-0">
          <button class="inline-flex text-gray-500 hover:text-gray-400 focus:outline-none transition-colors duration-200"
                  onclick="this.parentElement.parentElement.parentElement.remove()">
            <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>
<% end %>

<script>
  // フラッシュメッセージを5秒後に自動削除
  document.addEventListener('DOMContentLoaded', function() {
    const flashMessages = document.querySelectorAll('[data-flash-message]');
    flashMessages.forEach(function(message) {
      setTimeout(function() {
        if (message.parentElement) {
          message.remove();
        }
      }, 5000);
    });
  });
</script>

